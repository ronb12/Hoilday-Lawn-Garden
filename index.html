<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#4CAF50">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <title>Holliday's Lawn & Garden</title>

  <!-- Favicons -->
  <link rel="icon" href="favicon.ico">
  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="variables.css">
  <link rel="stylesheet" href="modern-styles.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

  <!-- Firebase SDK -->
  <script defer src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
  <script defer src="https://www.gstatic.com/firebasejs/10.8.0/firebase-auth-compat.js"></script>
  <script defer src="https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore-compat.js"></script>
  <script defer src="https://www.gstatic.com/firebasejs/10.8.0/firebase-storage-compat.js"></script>
  <script defer src="https://www.gstatic.com/firebasejs/10.8.0/firebase-analytics-compat.js"></script>
  <script defer src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-check-compat.js"></script>
  <script defer src="https://www.gstatic.com/firebasejs/10.8.0/firebase-performance-compat.js"></script>

  <!-- Configurations -->
  <script defer src="firebase-config.js"></script>
  <script defer src="recaptcha-config.js"></script>
  <script defer src="firebase-init.js"></script>

  <!-- Service Worker & Install Prompt -->
  <script>
    // Create install button element early
    const installBtn = document.createElement('button');
    installBtn.id = 'installBtn';
    installBtn.textContent = 'üì± Install App';
    installBtn.className = 'floating-button install-button';
    installBtn.style.display = 'none';

    // Wait for DOM to be ready
    document.addEventListener('DOMContentLoaded', () => {
      // Add install button to DOM
      const floatingButtons = document.querySelector('.floating-buttons');
      if (floatingButtons) {
        floatingButtons.appendChild(installBtn);
      }
      
      // Initialize Firebase after config is loaded
      if (window.firebaseConfig) {
        initializeFirebaseDB().catch(console.error);
      } else {
        console.error('Firebase configuration not found');
      }
    });

    // Service Worker Registration
    window.addEventListener('load', () => {
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('service-worker.js')
          .then(reg => {
            console.log('‚úÖ Service Worker registered:', reg.scope);
            reg.addEventListener('updatefound', () => {
              const updateBanner = document.getElementById('updateBanner');
              if (updateBanner) {
                updateBanner.style.display = 'block';
              }
            });
          })
          .catch(error => {
            console.warn('‚ö†Ô∏è Service Worker registration failed:', error);
          });
      }
    });

    // PWA Installation
    let deferredPrompt;
    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault();
      deferredPrompt = e;
      if (installBtn) {
        installBtn.style.display = 'block';
      }
    });

    // Handle install button click
    if (installBtn) {
      installBtn.addEventListener('click', async () => {
        if (!deferredPrompt) return;
        installBtn.style.display = 'none';
        try {
          await deferredPrompt.prompt();
          const { outcome } = await deferredPrompt.userChoice;
          console.log(`User ${outcome === 'accepted' ? '‚úÖ Installed' : '‚ùå Dismissed'} the app`);
        } catch (error) {
          console.error('Install prompt error:', error);
        }
        deferredPrompt = null;
      });
    }

    // Handle service worker updates
    let refreshing = false;
    navigator.serviceWorker.addEventListener('controllerchange', () => {
      if (refreshing) return;
      window.location.reload();
      refreshing = true;
    });

    // Admin link visibility
    window.addEventListener('DOMContentLoaded', () => {
      const adminLink = document.getElementById('adminLink');
      if (adminLink) {
        window.firebaseReadyPromise?.then(() => {
          const allowedAdmins = ["ronellbradley@bradleyvs.com"];
          const user = window.HollidayApp?.auth?.currentUser;
          if (user && allowedAdmins.includes(user.email)) {
            adminLink.style.display = 'block';
          }
        });
      }
    });
  </script>
</head>
<body>
  <header>
    <div class="header-content">
      <img src="assets/images/Hollidays_Lawn_Garden_Logo.png" alt="Holliday's Lawn & Garden Logo" class="logo">
      <div class="hamburger" onclick="toggleMenu()">‚ò∞</div>
      <nav class="nav-links" id="navLinks">
        <a href="index.html" class="active">Home</a>
        <a href="services.html">Services</a>
        <a href="about.html">About</a>
        <a href="contact.html">Contact</a>
        <a href="pay-your-bill.html">Pay Your Bill</a>
        <a href="gallery.html">Gallery</a>
        <a href="login.html">Login</a>
        <a href="admin-login.html" id="adminLink" style="display:none;">Admin</a>
      </nav>
    </div>
  </header>

  <section class="hero">
    <div class="hero-content">
      <h1>Welcome to Holliday's Lawn & Garden</h1>
      <p>Professional Lawn Care & Landscaping Services</p>
      <a href="#contact" class="cta-button">Get a Free Estimate</a>
    </div>
  </section>

  <section class="services-section">
    <div class="container">
      <h2>Our Services</h2>
      <div class="services-grid">
        <div class="service-card">
          <i class="service-icon">üåø</i>
          <h3>Mowing & Trimming</h3>
          <p>Professional lawn maintenance to keep your yard looking pristine.</p>
        </div>
        <div class="service-card">
          <i class="service-icon">üè°</i>
          <h3>Landscape Design</h3>
          <p>Custom landscape designs to transform your outdoor space.</p>
        </div>
        <div class="service-card">
          <i class="service-icon">üßπ</i>
          <h3>Pressure Washing</h3>
          <p>Restore the beauty of your outdoor surfaces.</p>
        </div>
        <div class="service-card">
          <i class="service-icon">üè¢</i>
          <h3>Commercial Lawn Care</h3>
          <p>Comprehensive maintenance for business properties.</p>
        </div>
      </div>
    </div>
  </section>

  <section class="testimonials">
    <div class="container">
      <h2>What Our Customers Say</h2>
      <div class="testimonials-grid">
        <div class="testimonial">
          <p>"Holliday's Lawn & Garden transformed my backyard! Highly professional and affordable service."</p>
          <div class="rating">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
          <cite>- Sarah Johnson</cite>
        </div>
        <div class="testimonial">
          <p>"Reliable, friendly, and the best landscaping crew I've ever hired!"</p>
          <div class="rating">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
          <cite>- Michael Thompson</cite>
        </div>
      </div>
    </div>
  </section>

  <footer>
    <div class="footer-content">
      <div class="contact-info">
        <h4>Contact Us</h4>
        <p><i class="fas fa-user"></i> <strong>Owner:</strong> Karl Holliday</p>
        <p><i class="fas fa-phone"></i> (504) 717-1887</p>
        <p><i class="fas fa-envelope"></i> 7holliday@gmail.com</p>
      </div>
      <div class="hours">
        <h4>Hours</h4>
        <p><i class="far fa-clock"></i> Mon-Fri: 8:00 AM - 5:00 PM</p>
        <p><i class="far fa-clock"></i> Sat: 8:00 AM - 3:00 PM</p>
        <p><i class="far fa-clock"></i> Sun: Closed</p>
      </div>
      <div class="social-links">
        <h4>Follow Us</h4>
        <a href="#" aria-label="Facebook"><i class="fab fa-facebook"></i></a>
        <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
        <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
      </div>
    </div>
    <div class="copyright">
      <p>¬© 2025 Holliday's Lawn & Garden. All rights reserved.</p>
    </div>
  </footer>

  <div class="floating-buttons">
    <a href="#contact" class="floating-button contact-button">üìû Contact Us</a>
  </div>

  <div id="updateBanner" class="update-banner" style="display:none;">
    üîÑ New update available ‚Äì Tap to refresh
  </div>

  <script>
    // Mobile menu toggle
    document.querySelector('.hamburger').addEventListener('click', function() {
      document.querySelector('.nav-links').classList.toggle('active');
    });
  </script>
</body>
</html>
